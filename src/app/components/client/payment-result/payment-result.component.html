<p-toast></p-toast>

<section class="checkout spad">
    <div class="container">
        <div class="checkout__form">
            <div class="row">
                <div class="col-lg-12">
                    <div class="card">
                        <div class="card-body text-center">
                            <!-- Loading state -->
                            <div *ngIf="loading">
                                <i class="pi pi-spin pi-spinner" style="font-size: 2rem"></i>
                                <h3 class="mt-3">Verifying your payment...</h3>
                                <p>Please wait while we confirm your transaction details.</p>
                            </div>

                            <!-- Success state -->
                            <div *ngIf="!loading && paymentStatus === 'success'" class="text-center">
                                <div class="success-icon mb-4">
                                    <i class="pi pi-check-circle" style="font-size: 4rem; color: #28a745;"></i>
                                </div>
                                <h2>Payment Successful!</h2>
                                <p class="mb-4">Your VNPay transaction has been completed successfully.</p>
                                
                                <div class="transaction-details mt-4 mb-4">
                                    <div class="card">
                                        <div class="card-header bg-light">
                                            <h5 class="mb-0">Transaction Details</h5>
                                        </div>
                                        <div class="card-body">
                                            <div class="row">
                                                <div class="col-md-6 text-left">
                                                    <p><strong>Order ID:</strong> {{transactionInfo?.orderId}}</p>
                                                    <p><strong>Amount:</strong> {{transactionInfo?.amount | currency:'VND':'symbol':'1.0-0'}}</p>
                                                </div>
                                                <div class="col-md-6 text-left">
                                                    <p><strong>Transaction ID:</strong> {{transactionInfo.transactionId}}</p>
                                                    <p><strong>Payment Date:</strong> {{transactionInfo.paymentDate | date:'medium'}}</p>
                                                </div>
                                                <div class="col-md-12 text-left" *ngIf="transactionInfo.bankCode">
                                                    <p><strong>Bank:</strong> {{transactionInfo.bankCode}}</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="d-flex justify-content-center mt-4">
                                    <button pButton pRipple label="View Order History" 
                                            icon="pi pi-list" 
                                            class="p-button-success mr-3"
                                            (click)="goToOrderHistory()"></button>
                                    <button pButton pRipple label="Continue Shopping" 
                                            icon="pi pi-shopping-cart" 
                                            class="p-button-primary"
                                            (click)="goToHomePage()"></button>
                                </div>
                            </div>

                            <!-- Failed state -->
                            <div *ngIf="!loading && paymentStatus === 'failed'" class="text-center">
                                <div class="error-icon mb-4">
                                    <i class="pi pi-times-circle" style="font-size: 4rem; color: #dc3545;"></i>
                                </div>
                                <h2>Payment Failed</h2>
                                <p class="mb-4">We couldn't process your payment. Please try again or use a different payment method.</p>
                                
                                <div class="d-flex justify-content-center mt-4">
                                    <button pButton pRipple label="Try Again" 
                                            icon="pi pi-refresh" 
                                            class="p-button-danger mr-3"
                                            (click)="goToHomePage()"></button>
                                    <button pButton pRipple label="Contact Support" 
                                            icon="pi pi-envelope" 
                                            class="p-button-outlined p-button-secondary"
                                            (click)="goToHomePage()"></button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section> 