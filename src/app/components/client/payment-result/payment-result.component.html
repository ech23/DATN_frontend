<p-toast></p-toast>

<section class="checkout spad">
    <div class="container">
        <div class="checkout__form">
            <div class="row">
                <div class="col-lg-12">
                    <div class="card">
                        <div class="card-body text-center">
                            <!-- Loading state -->
                            <div *ngIf="loading">
                                <i class="pi pi-spin pi-spinner" style="font-size: 2rem"></i>
                                <h3 class="mt-3">Verifying your payment...</h3>
                                <p>Please wait while we confirm your transaction details.</p>
                            </div>

                            <!-- Success state -->
                            <div *ngIf="!loading && paymentStatus === 'success'" class="text-center">
                                <div class="success-icon mb-4">
                                    <i class="pi pi-check-circle" style="font-size: 4rem; color: #28a745;"></i>
                                </div>
                                <h2>Payment Successful!</h2>
                                <p class="mb-4">Your VNPay transaction has been completed successfully.</p>
                                
                                <div class="transaction-details mt-4 mb-4">
                                    <div class="row">
                                        <div class="col-md-8 offset-md-2">
                                            <table class="table">
                                                <tbody>
                                                    <tr *ngIf="transactionInfo.orderId">
                                                        <th>Order ID:</th>
                                                        <td>{{transactionInfo.orderId}}</td>
                                                    </tr>
                                                    <tr *ngIf="transactionInfo.amount">
                                                        <th>Amount:</th>
                                                        <td>{{transactionInfo.amount | currency:'VND':'symbol':'1.0-0'}}</td>
                                                    </tr>
                                                    <tr *ngIf="transactionInfo.transactionId">
                                                        <th>Transaction ID:</th>
                                                        <td>{{transactionInfo.transactionId}}</td>
                                                    </tr>
                                                    <tr *ngIf="transactionInfo.paymentDate">
                                                        <th>Payment Date:</th>
                                                        <td>{{transactionInfo.paymentDate | date:'medium'}}</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="mt-4">
                                    <button class="btn btn-primary mr-3" (click)="goToOrderHistory()">
                                        View Order Details
                                    </button>
                                    <button class="btn btn-outline-secondary" (click)="goToHomePage()">
                                        Continue Shopping
                                    </button>
                                </div>
                            </div>

                            <!-- Failed state -->
                            <div *ngIf="!loading && paymentStatus === 'failed'" class="text-center">
                                <div class="error-icon mb-4">
                                    <i class="pi pi-times-circle" style="font-size: 4rem; color: #dc3545;"></i>
                                </div>
                                <h2>Payment Failed</h2>
                                <p class="mb-4">We couldn't process your payment. Please try again or use a different payment method.</p>
                                
                                <div class="mt-4">
                                    <button class="btn btn-primary" (click)="goToHomePage()">
                                        Return to Homepage
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section> 